import{d as N,a0 as C,ao as O,bk as v,ar as R,w as $,a2 as D,o as i,m as p,k as d,G as u,f as t,t as b,p as c,aa as M,bp as j,bq as z,F as k,I as A,i as E,h as g,ax as J,bA as P,l as F,aB as q,_ as G}from"./eUQ_X7Id.js";import{_ as I}from"./B3xdBQzM.js";import{e as T}from"./DkQfqnYF.js";const U=["open"],H={flex:"~ gap2","select-none":"","items-center":"",px4:""},K={key:0,class:"bg-red:10 px5 py3 text-red"},Y=N({__name:"StateEditor",props:{name:{},open:{type:Boolean},revision:{},state:{},readonly:{type:Boolean}},emits:["update:open"],setup(h,{emit:B}){const s=h,o=C(s,"open",B,{passive:!0}),V=O(),r=v(),l=v();function m(){l.value=void 0;try{s.state?r.value=JSON.parse(JSON.stringify(s.state)):(typeof s.state=="number"||typeof s.state!="string")&&(r.value=s.state)}catch(e){console.error(e),l.value=e}}R(()=>{m(),$(()=>[s.revision,s.state],e=>{typeof e!="number"&&typeof e!="string"?f(e,s.state):r.value=s.state},{deep:!0})});function f(e,n){for(const a in e)e[a]===null?n[a]=null:Array.isArray(e[a])?n[a]=e[a].slice():typeof e[a]=="object"?f(e[a],n[a]):n[a]=e[a]}async function _(){m(),await q()}return(e,n)=>{const a=G,w=I,S=D("tooltip");return i(),p("div",{class:"state-editor-details",open:e.name?t(o):!0},[d("div",H,[e.name?(i(),p("button",{key:0,flex:"~","cursor-pointer":"","items-center":"",class:u(t(o)?"":"op50"),onClick:n[0]||(n[0]=y=>o.value=!t(o))},[d("div",{"i-carbon-chevron-right":"",transition:"",class:u(t(o)?"rotate-90 op0":"")},null,2),d("code",{px3:"",py1:"","font-mono":"",class:u(t(o)?"bg-[#8881] rounded-t":"rounded hover:bg-active")},b(e.name),3)],2)):c("",!0),M(e.$slots,"actions",j(z({isOpen:t(o),name:e.name,state:e.state}))),t(o)?(i(),p(k,{key:1},[A(E(a,{title:"Refresh View",icon:"carbon-renew",border:!1,onClick:_},null,512),[[S,"Refresh View",void 0,{bottom:!0}]]),t(r)&&!t(l)?(i(),g(w,{key:0,getter:()=>({name:e.name,input:JSON.stringify(t(r))})},null,8,["getter"])):c("",!0)],64)):c("",!0)]),t(o)||!e.name?(i(),p(k,{key:0},[t(l)?(i(),p("div",K," Error: "+b(t(l)),1)):(i(),g(t(T),J({key:1,modelValue:t(r),"onUpdate:modelValue":n[1]||(n[1]=y=>F(r)?r.value=y:null)},e.$attrs,{class:["json-editor-vue",[t(V)==="dark"?"jse-theme-dark":"",(e.name,"")]],"main-menu-bar":!1,"navigation-bar":!1,"status-bar":!1,"read-only":"readonly"in e?e.readonly:t(P),indentation:2,"tab-size":2}),null,16,["modelValue","class","read-only"]))],64)):c("",!0)],8,U)}}});export{Y as _};
